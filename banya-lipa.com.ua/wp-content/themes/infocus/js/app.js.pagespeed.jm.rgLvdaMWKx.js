$(function(){$('.lazy').Lazy({effect:"fadeIn",effectTime:500,visibleOnly:true,threshold:2000,afterLoad:function(element){$(element).closest('.owl-carousel, .js-owl').trigger('refresh.owl.carousel');},});});(function(){var tabs=$('.js-tabs');tabs.each(function(){var thisTabs=$(this),nav=thisTabs.find('.js-tabs-link'),item=thisTabs.find('.js-tabs-item'),dropItem=thisTabs.find('.item');nav.on('click',function(){var thisNav=$(this),indexNav=thisNav.index();nav.removeClass('active');thisNav.addClass('active');if(item.eq(indexNav).find('.lazy').is('[data-src]')){item.eq(indexNav).find('.lazy').lazy({delay:0,placeholder:"data:image/gif;base64,R0lGODlhEALAPQAPzl5uLr9Nrl8e7...",});}item.hide();item.eq(indexNav).fadeIn();if(item.eq(indexNav).find('.feature__item').is('[data-src]')){item.eq(indexNav).find('.feature__item').lazy({bind:"event",delay:0});}return false;});dropItem.on('click',function(){var thisDropItem=$(this),indexDropItem=thisDropItem.index();if(item.eq(indexDropItem).find('.lazy').is('[data-src]')){item.eq(indexDropItem).find('.lazy').lazy({delay:0});}item.hide();item.eq(indexDropItem).fadeIn();});});})();var navArrows=["\n    <svg class=\"icon icon-arrow-prev\">\n  <use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"wp-content/themes/infocus/img/sprite.svg#icon-arrow-prev\"></use>\n    </svg>","<svg class=\"icon icon-arrow-next\">\n        <use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"wp-content/themes/infocus/img/sprite.svg#icon-arrow-next\"></use>\n    </svg>"];(function(){var slider=$('.js-owl');if(slider.length){slider.each(function(){var _this=$(this),itemsDesktop=_this.data('items-desktop'),itemsTabletAlbum=_this.data('items-tablet-album'),itemsTabletPortrait=_this.data('items-tablet-portrait'),itemsMobile=_this.data('items-mobile');if(itemsDesktop){owlDesktop(_this,itemsDesktop,itemsTabletAlbum,itemsTabletPortrait,itemsMobile);}if(!itemsDesktop&&itemsTabletAlbum&&itemsTabletPortrait&&itemsMobile){owlTabletAlbum(_this,itemsTabletAlbum,itemsTabletPortrait,itemsMobile);$(window).resize(function(){owlTabletAlbum(_this,itemsTabletAlbum,itemsTabletPortrait,itemsMobile);});}if(!itemsDesktop&&!itemsTabletAlbum&&itemsTabletPortrait&&itemsMobile){owlTabletPortrait(_this,itemsTabletPortrait,itemsMobile);$(window).resize(function(){owlTabletPortrait(_this,itemsTabletPortrait,itemsMobile);});}if(!itemsDesktop&&!itemsTabletAlbum&&!itemsTabletPortrait&&itemsMobile){owlMobile(_this,itemsMobile);$(window).resize(function(){owlMobile(_this,itemsMobile);});}});}function owlDesktop(obj,itemsDesktop,itemsTabletAlbum,itemsTabletPortrait,itemsMobile){var optionLoop=true;if(obj.is('[data-no-loop]')){optionLoop=false;}var optionAutoHeight=false;if(obj.is('[data-autoheight]')){optionAutoHeight=true;}if(obj.is('[data-no-clone]')){console.log(obj.children().length);if(itemsDesktop>=obj.children().length){optionLoop=false;}}obj.addClass('owl-carousel');obj.owlCarousel({items:itemsDesktop,nav:true,navElement:'button',navText:navArrows,dots:true,loop:optionLoop,smartSpeed:500,autoHeight:optionAutoHeight,responsive:{0:{items:itemsMobile},768:{items:itemsTabletPortrait},1024:{items:itemsTabletAlbum},1200:{items:itemsDesktop}}});}function owlTabletAlbum(obj,itemsTabletAlbum,itemsTabletPortrait,itemsMobile){var optionLoop=true;if(obj.is('[data-no-loop]')){optionLoop=false;}var optionAutoHeight=false;if(obj.is('[data-autoheight]')){optionAutoHeight=true;}if(obj.is('[data-no-clone]')){console.log(obj.children().length);if(itemsDesktop>=obj.children().length){optionLoop=false;}}var windowWidth=$(window).width();if(windowWidth<=1199){if(!obj.hasClass('owl-carousel')){obj.addClass('owl-carousel');obj.owlCarousel({items:itemsTabletAlbum,nav:true,navElement:'button',navText:navArrows,dots:true,loop:optionLoop,smartSpeed:500,autoHeight:optionAutoHeight,lazyLoad:true,responsive:{0:{items:itemsMobile},768:{items:itemsTabletPortrait},1024:{items:itemsTabletAlbum}}});}}else{obj.removeClass('owl-carousel');obj.trigger('destroy.owl.carousel');}}function owlTabletPortrait(obj,itemsTabletPortrait,itemsMobile){var optionLoop=true;if(obj.is('[data-no-loop]')){optionLoop=false;}var optionAutoHeight=false;if(obj.is('[data-autoheight]')){optionAutoHeight=true;}if(obj.is('[data-no-clone]')){console.log(obj.children().length);if(itemsDesktop>=obj.children().length){optionLoop=false;}}var windowWidth=$(window).width();if(windowWidth<=1023){if(!obj.hasClass('owl-carousel')){obj.addClass('owl-carousel');obj.owlCarousel({items:itemsTabletPortrait,nav:true,navElement:'button',navText:navArrows,dots:true,loop:optionLoop,smartSpeed:500,autoHeight:optionAutoHeight,lazyLoad:true,responsive:{0:{items:itemsMobile},768:{items:itemsTabletPortrait}}});}}else{obj.removeClass('owl-carousel');obj.trigger('destroy.owl.carousel');}}function owlMobile(obj,itemsMobile){var optionLoop=true;if(obj.is('[data-no-loop]')){optionLoop=false;}var optionAutoHeight=false;if(obj.is('[data-autoheight]')){optionAutoHeight=true;}if(obj.is('[data-no-clone]')){console.log(obj.children().length);if(itemsDesktop>=obj.children().length){optionLoop=false;}}var fullWidth=window.innerWidth;if(navigator.platform.indexOf('Win')>-1){var mobilePoint=766;}else{var mobilePoint=767;}if(fullWidth<=mobilePoint){if(!obj.hasClass('owl-carousel')){obj.addClass('owl-carousel');obj.owlCarousel({items:itemsMobile,nav:true,navElement:'button',navText:navArrows,dots:true,smartSpeed:500,loop:optionLoop,lazyLoad:true,autoHeight:optionAutoHeight});}}else{obj.removeClass('owl-carousel');obj.trigger('destroy.owl.carousel');}}})();(function(){var body=$('body'),wrap=$('.js-popup-wrap'),close=$('.js-popup-close');var el=void 0;$('[data-popup]').on('click',function(e){e.preventDefault();e.stopPropagation();var _this=$(this),data=_this.data('popup');el=$(data);if(data=='.js-popup-order'){var nameProject=_this.closest('.project__box').find('.project__name').text();$('.js-popup-order').find('input[name="Название проекта"]').val(nameProject);}body.addClass('no-scroll');body.css('padding-right',getScrollBarWidth());if(el.find('.lazy').is('[data-src]')){el.find('.lazy').lazy({delay:0});}el.addClass('visible');setTimeout(function(){el.addClass('animation');},10);});close.on('click',function(e){e.preventDefault();hidePopup();});wrap.on('click',function(e){e.stopPropagation();});$('.popup').on('click',function(){hidePopup();});$(document).keyup(function(e){if(e.keyCode===27)hidePopup();});$('.js-fake-btn-1').on('click',function(e){e.preventDefault();hidePopup();setTimeout(function(){$('.js-fake-btn-2').trigger('click');},500);});function hidePopup(){if(body.hasClass('no-scroll')){body.css('padding-right',0);if(el){el.removeClass('animation');setTimeout(function(){el.removeClass('visible');body.removeClass('no-scroll');},300);}}}})();$(function(){$(document).ready(function(){var owlCarouselMaterials=$('.owl-carousel-materials');if($(this).find('.materials__slider-item').length==1){var loop=false;}else{var loop=true;}owlCarouselMaterials.owlCarousel({items:1,nav:true,navElement:'button',navText:navArrows,dots:true,smartSpeed:1000,lazyLoad:true,lazyLoadEager:1,onInitialized:counter,onTranslate:counter,onRefreshed:counter,responsive:{0:{dots:false},1024:{dots:false}}});function counter(event){var element=event.target;var items=event.item.count;var item=event.item.index+1;console.log(item)
if(item>items){item=item-items}$(event.delegateTarget.nextElementSibling).css('width',(item/items)*100+'%');}var $link=$('.js-materials-item');var $preloader=$('.j-materials-preloader');var $tab=$('.materials__tab');$link.on('click',function(){var $this=$(this);if(!$this.hasClass('active')){var linkIndex=$this.attr('data-material-tab');var img=$tab.eq(linkIndex).find('.lazy');$link.removeClass('active');$this.addClass('active');$tab.hide();$preloader.show();if(img.is('[data-src]')){img.lazy({bind:"event",delay:0,afterLoad:function(element){openTab();},}).addClass('load');}else{openTab();}function openTab(){$tab.eq(linkIndex).find('.owl-carousel-materials').trigger('refresh.owl.carousel').trigger('resize.owl.carousel');$tab.eq(linkIndex).css('opacity','0').show();setTimeout(function(){$tab.eq(linkIndex).css('opacity','1');$preloader.fadeOut();},700);};}});});});$(function(){$('.owl-carousel-portfolio').owlCarousel({items:1,nav:true,navElement:'button',navText:navArrows,dots:true,loop:true,smartSpeed:500,lazyLoad:true,responsive:{0:{dots:true},1024:{dots:false}}});$('.owl-carousel-oven').owlCarousel({items:1,nav:true,navElement:'button',navText:navArrows,dots:false,loop:true,smartSpeed:500,lazyLoad:true,responsive:{0:{dots:true},768:{dots:false}}});$('.owl-carousel-review').owlCarousel({items:1,nav:true,navElement:'button',navText:navArrows,dots:true,loop:true,autoHeight:true,lazyLoad:true,smartSpeed:500,});});(function(){var desc=$('.js-desc');desc.each(function(){var thisDesc=$(this),nav=thisDesc.find('.js-desc-link'),item=thisDesc.find('.js-desc-item'),dot=thisDesc.find('.js-desc-dot'),dropItem=thisDesc.find('.item');nav.on('click',function(){var thisNav=$(this),indexNav=thisNav.index();nav.removeClass('active');thisNav.addClass('active');dot.removeClass('active');dot.eq(indexNav).addClass('active');item.hide();item.eq(indexNav).show();return false;});dot.on('click',function(){var thisDot=$(this),indexDot=thisDot.index();dot.removeClass('active');thisDot.addClass('active');nav.removeClass('active');nav.eq(indexDot).addClass('active');item.hide();item.eq(indexDot).show();return false;});console.log(!isTouchDevice());if(!isTouchDevice()){nav.hover(function(){var thisNav=$(this),indexNav=thisNav.index();dot.removeClass('active');dot.eq(indexNav).addClass('active');item.hide();item.eq(indexNav).show();},function(){item.hide();item.eq(desc.find('.js-desc-link.active').index()).show();dot.removeClass('active');dot.eq(desc.find('.js-desc-link.active').index()).addClass('active');});dot.hover(function(){var thisDot=$(this),indexDot=thisDot.index();nav.eq(indexDot).addClass('show');dot.removeClass('active');thisDot.addClass('active');item.hide();item.eq(indexDot).show();},function(){nav.removeClass('show');item.hide();item.eq(desc.find('.js-desc-link.active').index()).show();dot.removeClass('active');dot.eq(desc.find('.js-desc-link.active').index()).addClass('active');});}dropItem.on('click',function(){var thisDropItem=$(this),indexDropItem=thisDropItem.index();item.hide();item.eq(indexDropItem).fadeIn();});});})();$(document).ready(function(){$("form").submit(function(){var th=$(this);$.ajax({type:"POST",url:"/wp-content/themes/infocus/mail.php",data:th.serialize()}).done(function(){if(th.hasClass('js-form-order')){console.log('успех рассчет');ga('send','event','form','send','tellmeprice',2);}else{console.log('успех остальные');ga('send','event','form','send','callbackme',1);}var body=$('body');if(body.hasClass('no-scroll')){body.css('padding-right',0);$(".popup").removeClass('animation');$(".popup").removeClass('visible');body.removeClass('no-scroll');}body.addClass('no-scroll');body.css('padding-right',getScrollBarWidth());$(".js-popup-success").addClass('visible');setTimeout(function(){$(".js-popup-success").addClass('animation');},10);setTimeout(function(){th.trigger("reset");},2000);}).fail(function(){var body=$('body');if(body.hasClass('no-scroll')){body.css('padding-right',0);$(".popup").removeClass('animation');$(".popup").removeClass('visible');body.removeClass('no-scroll');}body.addClass('no-scroll');body.css('padding-right',getScrollBarWidth());$(".js-popup-fail").addClass('visible');setTimeout(function(){$(".js-popup-fail").addClass('animation');},10);});return false;});$(".js-popup-wrap-success").on('click',function(e){e.stopPropagation();});$(".js-popup-wrap-fail").on('click',function(e){e.stopPropagation();});$(".popup__close_success, .popup_success").on('click',function(){if($('body').hasClass('no-scroll')){$('body').css('padding-right',0);$(".js-popup-success").removeClass('animation');setTimeout(function(){$(".js-popup-success").removeClass('visible');},300);$('body').removeClass('no-scroll');}});$(".popup__close_fail, .popup_fail, .button__fail").on('click',function(){if($('body').hasClass('no-scroll')){$('body').css('padding-right',0);$(".js-popup-fail").removeClass('animation');setTimeout(function(){$(".js-popup-fail").removeClass('visible');},300);$('body').removeClass('no-scroll');}});$(".company__link").on("click",function(e){e.preventDefault();$(".company__text p").not(':first-child').show();$(".company__foot").hide();});window.blockMenuHeaderScroll=false;$(window).on('touchstart',function(e){if($(e.target).closest('.owl-drag').length==1){blockMenuHeaderScroll=false;}});$(window).on('touchend',function(){blockMenuHeaderScroll=false;});$(window).on('touchmove',function(e){if(blockMenuHeaderScroll){e.preventDefault();}});});(function(){$('.idea__desktop').parents('.owl-item').hide();})();function getScrollBarWidth(){var outer=$('<div>').css({visibility:'hidden',width:100,overflow:'scroll'}).appendTo('body'),widthWithScroll=$('<div>').css({width:'100%'}).appendTo(outer).outerWidth();outer.remove();return 100-widthWithScroll;};svg4everybody();(function(){var head=$('.js-form-head'),body=$('.js-form-body');head.on('click',function(){body.slideToggle();});})();(function(){var input=$('.js-input-mask');if(input.length){input.each(function(){var _this=$(this),mask=_this.data('mask');_this.mask(mask);});}})();(function(){var photo=$('.js-photo');photo.each(function(){var thisPhoto=$(this),big=thisPhoto.find('.js-photo-big'),item=thisPhoto.find('.js-photo-item');item.on('click',function(e){e.preventDefault();var _this=$(this);item.removeClass('active');_this.addClass('active');big.attr('src',_this.find('.js-photo-sm').attr('src').replace('.jpg','-big.jpg'));});});})();(function(){var header=$('.js-header'),link=$('.js-header-link'),wrap=$('.js-header-wrap'),dataHeaderClass=$('[data-header-class]');var CurrentScroll=0;$(window).scroll(function(){var scrollTop=$(window).scrollTop(),sections=$('.js-section'),headerHeight=header.outerHeight();dataHeaderClass.each(function(i){var _this=$(this),posTop=_this.offset().top;_this.removeClass('up');if(scrollTop+headerHeight>=posTop){_this.addClass('up');var lastItem=$('body').find('[data-header-class].up').last();var dataClass=lastItem.data('header-class');if(dataClass=='black'){if(!header.hasClass('black')){header.addClass('black');}if(header.hasClass('white')){header.removeClass('white');}}else{if(!header.hasClass('white')){header.addClass('white');}if(header.hasClass('black')){header.removeClass('black');}}header.find('.js-header-link').removeClass('active');header.find('.js-header-link[href="#'+$(this).attr('id')+'"]').addClass('active');}});if(scrollTop>1){if(!header.hasClass('new')){header.addClass('new');}}else{header.removeClass('new black white');}if(scrollTop>500){if(scrollTop>CurrentScroll){header.removeClass('new').addClass('hide');}else{header.removeClass('hide').addClass('new');}CurrentScroll=scrollTop;}else{header.removeClass('hide');}});link.on('click',function(){var $el=$(this),id=$el.attr('href'),headerHeight=header.outerHeight();wrap.removeClass('visible');$('.js-header-body').removeClass('visible');headerMinusOne=headerHeight-1;$('html, body').animate({scrollTop:$(id).offset().top},1000);return false;});})();$(window).scroll(function(){if($(window).scrollTop()==$(document).height()-$(window).height()){$("header").fadeOut();}else{$("header").fadeIn();}});$(".js-link").click(function(){$("html, body").animate({scrollTop:$($(this).attr("href")).offset().top+"px"},{duration:1000});return false;});(function(){var link=$('.js-main-link'),bg=$('.js-main-bg');link.on('click',function(e){e.preventDefault();var _this=$(this),attr=_this.attr('href');if($(attr).is('[data-src]')){$(attr).lazy({bind:"event",delay:0});}link.removeClass('active');_this.addClass('active');bg.hide();$(attr).show();});})();(function(){var wrap=$('.js-header-wrap'),close=$('.js-header-close'),top=$('.js-header-top'),body=$('.js-header-body'),burger=$('.js-header-burger');burger.on('click',function(){wrap.addClass('visible');});close.on('click',function(){wrap.removeClass('visible');});var windowWidth=$(window).width();if(isTouchDevice()){top.on('click',function(e){e.stopPropagation();top.parents('.js-header-more').find(body).toggleClass('visible');});$(document).on('click',function(){body.removeClass('visible');});}})();(function(){var phone=$('.js-phone'),head=$('.js-phone-head'),body=$('.js-phone-body');var windowWidth=$(window).width();if(isTouchDevice()){head.on('click',function(e){e.stopPropagation();var _this=$(this);_this.parents('.js-phone').toggleClass('active');});$(document).on('click',function(){phone.removeClass('active');});}})();function isTouchDevice(){var prefixes=' -webkit- -moz- -o- -ms- '.split(' ');var mq=function mq(query){return window.matchMedia(query).matches;};if('ontouchstart'in window||window.DocumentTouch&&document instanceof DocumentTouch){$('body').addClass('touch-device');return true;}var query=['(',prefixes.join('touch-enabled),('),'heartz',')'].join('');return mq(query);}$('.ui.dropdown').dropdown({transition:'fade down',onShow:function(){if($('.dropdown').find('.lazy').is('[data-src]')){$('.dropdown').find('.lazy').lazy({delay:0});}},});