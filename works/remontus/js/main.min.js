
$(document).ready(function(){$('.close').on('click',function(e){e.preventDefault();$.fancybox.close();});$('.check-field').on('click',function(e){e.preventDefault();var button=$(this).closest('form').find('button');var buttonVal=$(this).closest('form').find('button').prop('disabled');$(this).toggleClass('check-field_active');if(!buttonVal){button.prop('disabled',true);}else{button.prop('disabled',false);}});$('.check-field a').on('click',function(e){e.stopPropagation();var fff=$(this).attr('href');$.fancybox(fff);});function isBreakPoint(bp){var bps=[768,1024];var w=$(window).width();var min,max;for(var i=0,l=bps.length;i<l;i++){if(bps[i]===bp){min=bps[i-1]||0;max=bps[i];break;}}
return w>min&&w<=max;}
$('.tabs-flex').on('click','.tabs-caption:not(.tabs-caption_active)',function(){var thisClick=$(this);thisClick.addClass('tabs-caption_active').siblings().removeClass('tabs-caption_active').closest('.tabs-flex').find('.slider-tabs').velocity('transition.fadeOut',150,function(){$(this).removeClass('slider-tabs_active');$('.slider-tabs').eq(thisClick.index()).velocity('transition.slideDownIn',400,'block');});})
$('.js-next').on('click',function(e){e.preventDefault();var thisCl=$(this);var flexContainer=thisCl.closest('.flex-steps');var leftSide=flexContainer.find('.flex-steps-left');var allRightSide=flexContainer.find('.flex-steps-right');var thisRightSide=thisCl.closest('.flex-steps-right');var rWrapp=thisRightSide.closest('.r-side-wrapp');var indexThisRs=thisRightSide.index();if(isBreakPoint(768)){leftSide.css({height:leftSide.outerHeight()})
rWrapp.css({height:rWrapp.outerHeight()});}else{flexContainer.css({});};leftSide.find('.flex-steps-left__content').eq(indexThisRs).velocity({opacity:0},200,function(){$(this).removeClass('flex-steps-left__content_active');$(this).css({display:'none'});$(this).next().velocity('transition.flipYIn',400);thisRightSide.velocity({opacity:0},200,function(){$(this).removeClass('flex-steps-right_active');$(this).css({display:'none'});$(this).next().velocity('transition.slideUpIn',400,function(){leftSide.css({height:'auto'})
rWrapp.css({height:'auto'});});var j=0;function myLoop(){setTimeout(function(){thisRightSide.next().find('.fsr-tabs__prgrs:not(.fsr-tabs__prgrs_active)').eq(j).velocity({width:'12.1%'},{duration:300});j++;if(j<thisRightSide.next().find('.fsr-tabs__prgrs:not(.fsr-tabs__prgrs_active)').length){myLoop();}},300)};myLoop();});});});$('.choose-block__item').on('click',function(e){e.preventDefault();var n=$(this).index()+1;$(this).toggleClass('choose-block__item_act');$(this).find('i').toggleClass('ic'+n+'-hover');$('.choose-block__item-inside').eq($(this).index()).toggleClass('choose-block__item-inside_act');if(!($(this).hasClass('choose-block__item-inside_act'))){$(this).addClass('choose-block__item-inside_act');$(this).find('input').val($(this).find('.txt-t').text());}else{$(this).removeClass('choose-block__item-inside_act');$(this).find('input').val('');}});$('.radio').on('click',function(e){e.preventDefault();$(this).addClass('radio_act').siblings().removeClass('radio_act')
if($(this).hasClass('radio-room')){$('.js-room').html($(this).text());$('.js-typeroom').val($(this).text());}
if($(this).hasClass('js-val-span1-true')){$('.js-span1').addClass('js-span1_act');$('.js-plan').val($(this).text());}else if($(this).hasClass('js-val-span1-false')){$('.js-span1').removeClass('js-span1_act');$('.js-plan').val($(this).text());}
if($(this).hasClass('js-val-span2-true')){$('.js-span2').addClass('js-span2_act');$('.js-project').val($(this).text());}else if($(this).hasClass('js-val-span2-false')){$('.js-span2').removeClass('js-span2_act');$('.js-project').val($(this).text());}});$('.js-val-sq').on('change',function(e){e.preventDefault();$('.js-sq').html($(this).val()+' Ð¼2');});$('.counts__item').on('click',function(e){e.preventDefault();$(this).addClass('counts__item_act').siblings().removeClass('counts__item_act');$('.js-room-v').find('span').html($(this).text());$('.js-item-coutn').val($(this).text());});$('.tab-c').on('click','.tab-c__item:not(.tab-c__item_active)',function(){var thisClick=$(this);thisClick.addClass('tab-c__item_active').siblings().removeClass('tab-c__item_active').closest('.shadow-box').find('.tab-cont__item').velocity('transition.fadeOut',150,function(){$(this).removeClass('tab-cont__item_active');thisClick.closest('.shadow-box').find('.tab-cont__item').eq(thisClick.index()).velocity('transition.slideDownIn',400,'block');});if(thisClick.closest('.shadow-box').find('.tabs-image').length){thisClick.closest('.shadow-box').find('.tabs-image-item').velocity('transition.fadeOut',150,function(){$(this).removeClass('tabs-image-item_active');thisClick.closest('.shadow-box').find('.tabs-image-item').eq(thisClick.index()).velocity('transition.slideDownIn',400,'block');});}});$('.video-circles').on('click','.video-circle:not(.video-circle_active)',function(){var thisClick=$(this);thisClick.addClass('video-circle_active').siblings().removeClass('video-circle_active').closest('.tabs-vid').find('.tabs-video-item').velocity('transition.fadeOut',150,function(){$(this).removeClass('tabs-video-item_active');});$('.tabs-video-item').eq(thisClick.index()).velocity('transition.fadeIn',400,'block');});$('a.scr[href^="#"]').on('click',function(event){var target=$($(this).attr('href'));$(target).velocity('scroll',{duration:1000});});$('.js-click').on('click',function(){$('.js-click-val').val($(this).data('subject'));});$(".send").on('click',function(e){e.preventDefault();var form=$(this).parents("form");form.find(".inp-form").each(function(){var inp=$(this);var req=$(this).data("req");if(inp.hasClass('js-email')){var em=$(this).val();if(!validateEmail(em)){inp.addClass("not-valid");}else{inp.removeClass("not-valid");}}else if(req===1&&!inp.val().length){inp.addClass("not-valid");this.focus();}else{inp.removeClass("not-valid");}});var fakeBtn=form.find(".fakebtn").length;if(form.find(".not-valid").length){return false;}else{if(fakeBtn){form.find(".fakebtn")[0].click();}
$.ajax({type:"POST",url:form.attr('action'),data:form.serialize(),success:function(response){$(':input').not(':button, :submit, :reset, :hidden').val('').removeAttr('checked').removeAttr('selected');$.fancybox.close();var message=$('.modal');$.fancybox(message);}});}});if($('.main-slider').length){$('.main-slider').slick({slidesToShow:1,slidesToScroll:1,dots:false,speed:800,arrows:false,fade:true,centerMode:false,centerPadding:'30px',touchMove:false,draggable:false}).on('afterChange',function(){navigationCustom('.pages-1','.main-slider');});};navigationCustom('.pages-1','.main-slider')
$('.pages-1 .arrows_left').on('click',function(){$('.main-slider').slick('slickPrev');})
$('.pages-1 .arrows_right').on('click',function(){$('.main-slider').slick('slickNext');})
function navigationCustom(pages_numb,nameSlider){$(pages_numb).each(function(){var allSlick=$(nameSlider).slick("getSlick").slideCount;var currentSlide=$(nameSlider).slick('slickCurrentSlide')+1;$(this).find('sup').html(allSlick);$(this).find('span').html(currentSlide);});};if($('.slider-card').length){$('.slider-card').slick({slidesToShow:1,slidesToScroll:1,dots:false,speed:800,arrows:true,fade:false,centerMode:false,centerPadding:'90px',touchMove:false,draggable:false,responsive:[{breakpoint:768,settings:{centerMode:false}}]})};$(".fancybox").fancybox({'hideOnContentClick':true,minWidth:230,padding:0,closeBtn:true,afterClose:function(){$('.js-click-val').val('');}});$('input[type=tel]').mask("+7 (999) 999-99-99");$('input,textarea').focus(function(){$(this).data('placeholder',$(this).attr('placeholder')).attr('placeholder','');}).blur(function(){$(this).attr('placeholder',$(this).data('placeholder'));});if($('.map').length){ymaps.ready(init);function init(){var myMap=new ymaps.Map("map-canvas",{center:[55.772629,37.649831],zoom:17,controls:['zoomControl']}),Placemark1=new ymaps.Placemark([55.772629,37.649831],{balloonContent:'',hintContent:'',},{preset:'islands#redDotIcon'})
myMap.geoObjects.add(Placemark1);myMap.behaviors.disable('scrollZoom');}};$('input[type=email]').keyup(function(){$(this).val($(this).val().replace(/[^\x00-\x7F]+/i,""))});});function validateEmail(email){var re=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return re.test(email);}